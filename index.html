<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>生活智慧日历</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298, #1e3c72);
            background-size: 200% 200%;
            animation: animated-gradient 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
            font-family: 'Noto Sans SC', sans-serif;
        }
        
        @keyframes animated-gradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .card-layer { position: absolute; width: 100%; height: 100%; transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; backface-visibility: hidden; opacity: 0; pointer-events: none; }
        .card-layer.active { transform: translateX(0) scale(1); opacity: 1; pointer-events: auto; }
        .card-layer.prev-out { transform: translateX(-50%) scale(0.9); opacity: 0; }
        .card-layer.next-out { transform: translateX(50%) scale(0.9); opacity: 0; }
        .card-layer.next-in { transform: translateX(50%) scale(0.9); }
        .card-layer.prev-in { transform: translateX(-50%) scale(0.9); }
        .main-card { backdrop-filter: blur(25px) saturate(180%); background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); transition: all 0.3s ease; }
        .main-card:hover { transform: translateY(-8px); box-shadow: 0 35px 60px -15px rgba(0, 0, 0, 0.3); }
        .nav-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.4); cursor: pointer; transition: all 0.3s ease; }
        .nav-dot.active { background: #ffffff; transform: scale(1.3); box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); transition: all 0.3s ease; color: white; }
        .btn-primary:hover { transform: scale(1.05) translateY(-2px); box-shadow: 0 10px 20px rgba(118, 75, 162, 0.4); }
        .btn-secondary { background: rgba(230, 232, 240, 0.8); border: 1px solid rgba(0, 0, 0, 0.05); color: #334155; transition: all 0.3s ease;}
        .btn-secondary:hover { background: rgba(214, 219, 231, 0.9); transform: scale(1.05) translateY(-2px); }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-up { animation: fadeInUp 0.5s ease-out forwards; opacity: 0; }
        .info-block { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .info-block:hover { transform: scale(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .progress-circle { transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); display: none; align-items: center; justify-content: center; z-index: 1000; cursor: pointer; }
        .modal-content { max-width: 90vw; max-height: 90vh; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); border-radius: 1rem; }
        select:disabled { cursor: not-allowed; }
    </style>
</head>
<body class="flex flex-col items-center justify-center text-gray-800 p-4">
    <div class="text-center py-6">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-2 flex items-center justify-center gap-x-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a1 1 0 10-1.415-1.414 3 3 0 01-4.242 0 1 1 0 00-1.415 1.414 5 5 0 007.072 0z" clip-rule="evenodd" /></svg>
            生活智慧日历
        </h1>
        <p id="location-display" class="text-white/80 text-lg cursor-pointer hover:opacity-80 transition-opacity flex items-center justify-center gap-x-2" onclick="showLocationModal()">
            <span>正在获取位置...</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
            </svg>
        </p>
        <div class="text-xl font-mono text-white/90 mt-2" id="current-time"></div>
    </div>

    <div class="max-w-4xl mx-auto px-4 w-full">
        <div class="relative h-[650px] mb-8">
            
            <div class="card-layer active" id="layer-1">
                <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                    <div class="text-center mb-6 fade-in-up" data-anim="true">
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">今日概览</h2>
                        <p class="text-gray-500 text-lg" id="overview-date">...</p>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 flex-1">
                        <div class="info-block text-center p-4 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.1s;">
                            <div class="text-orange-500 mx-auto mb-2 text-4xl" id="overview-weather-icon">☀️</div>
                            <h3 class="font-bold text-gray-800">天气</h3>
                            <p class="text-xl font-bold text-orange-600" id="overview-temp">--°C</p>
                        </div>
                        <div class="info-block text-center p-4 bg-gradient-to-br from-purple-100 to-blue-100 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                            <div class="text-purple-500 mx-auto mb-2 text-4xl" id="overview-moon-icon">🌙</div>
                            <h3 class="font-bold text-gray-800">月相</h3>
                            <p class="text-xl font-bold text-purple-600" id="overview-moon-phase">...</p>
                        </div>
                        <div class="info-block text-center p-4 bg-gradient-to-br from-green-100 to-teal-100 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.3s;">
                            <div class="text-green-500 mx-auto mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L9 9.61l-1.447 1.447a1 1 0 00-1.394 1.432l5.5 5.5a1 1 0 001.432-1.394L11.39 12.5l5.216-2.234a1 1 0 000-1.84l-7-3zM9 13.41l-2.43-2.43 5.48-2.35 2.43 2.43-5.48 2.35z" /></svg></div>
                            <h3 class="font-bold text-gray-800">生态</h3>
                            <p class="text-xl font-bold text-green-600" id="overview-ecology-status">活跃期</p>
                        </div>
                        <div class="info-block text-center p-4 bg-gradient-to-br from-pink-100 to-red-100 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.4s;">
                            <div class="text-pink-500 mx-auto mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" /></svg></div>
                            <h3 class="font-bold text-gray-800">健康</h3>
                            <p class="text-xl font-bold text-pink-600" id="overview-health-status">...</p>
                        </div>
                        <div class="info-block text-center p-4 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.5s;">
                            <div class="text-yellow-500 mx-auto mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" /></svg></div>
                            <h3 class="font-bold text-gray-800">作息</h3>
                            <p class="text-xl font-bold text-yellow-600">规律</p>
                        </div>
                        <div class="info-block text-center p-4 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.6s;">
                            <div class="text-blue-500 mx-auto mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg></div>
                            <h3 class="font-bold text-gray-800">提醒</h3>
                            <p class="text-xl font-bold text-blue-600" id="overview-advice">...</p>
                        </div>
                    </div>
                    <div class="text-center mt-8 fade-in-up" data-anim="true" style="animation-delay: 0.7s;">
                        <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">查看详细信息 &rarr;</button>
                    </div>
                </div>
            </div>

            <div class="card-layer" id="layer-2">
                <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                    <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                        <h2 class="text-3xl font-bold text-gray-800">天气详情</h2>
                        <div class="bg-orange-400 p-3 rounded-2xl text-white shadow-lg text-4xl" id="details-weather-icon">☀️</div>
                    </div>
                    <div class="flex-1 overflow-y-auto">
                        <div class="grid md:grid-cols-2 gap-8 mb-6 fade-in-up" data-anim="true" style="animation-delay: 0.1s;">
                            <div>
                                <div class="text-center mb-6">
                                    <div class="text-6xl font-bold text-orange-600" id="details-temp">--°C</div>
                                    <p class="text-xl text-gray-500" id="details-feels-like">体感 --°C</p>
                                    <p class="text-lg text-gray-800 capitalize" id="details-desc">正在加载天气...</p>
                                </div>
                                <div class="space-y-4 text-sm">
                                    <div class="flex justify-between items-center"><span class="text-gray-600">湿度</span><span class="font-bold" id="details-humidity">-- %</span></div>
                                    <div class="flex justify-between items-center"><span class="text-gray-600">风速</span><span class="font-bold" id="details-wind">-- m/s</span></div>
                                    <div class="flex justify-between items-center"><span class="text-gray-600">气压</span><span class="font-bold" id="details-pressure">-- hPa</span></div>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 mb-4">未来24小时预报</h3>
                                <div class="bg-orange-50 p-4 rounded-2xl" id="weather-chart-container"><p class="text-center text-gray-500">正在加载预报...</p></div>
                            </div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                            <h3 class="font-bold text-red-800 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.636-1.214 2.852-1.214 3.488 0l6.093 11.624c.636 1.214-.472 2.777-1.744 2.777H3.908c-1.272 0-2.38-1.563-1.744-2.777L8.257 3.099zM10 6a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 6zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg>天气提醒</h3>
                            <div id="weather-advice-list" class="text-red-700 text-sm">正在根据实时天气生成建议...</div>
                        </div>
                    </div>
                    <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.3s;">
                        <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                        <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">下一层 &rarr;</button>
                    </div>
                </div>
            </div>
            
            <div class="card-layer" id="layer-3">
                 <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                    <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                        <h2 class="text-3xl font-bold text-gray-800">月相详情</h2>
                        <div class="bg-indigo-500 p-3 rounded-2xl text-white shadow-lg text-4xl" id="details-moon-icon">🌙</div>
                    </div>
                    <div class="flex-1 overflow-y-auto">
                        <div class="grid md:grid-cols-2 gap-8 mb-6 fade-in-up" data-anim="true" style="animation-delay: 0.1s;">
                            <div class="text-center">
                                <div class="relative w-40 h-40 mx-auto mb-4 text-8xl flex items-center justify-center" id="moon-visual">...</div>
                                <div class="bg-indigo-50 p-4 rounded-xl">
                                    <p class="text-2xl font-bold text-indigo-600" id="moon-phase-name">...</p>
                                    <p class="text-gray-500" id="moon-illumination">-- % 被照亮</p>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <h3 class="text-xl font-bold text-gray-800 mb-2">关键时间</h3>
                                <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl"><span class="flex items-center gap-2">🌅 日出</span> <span class="font-bold text-blue-600" id="sunrise-time">--:--</span></div>
                                <div class="flex justify-between items-center p-3 bg-orange-50 rounded-xl"><span class="flex items-center gap-2">🌇 日落</span> <span class="font-bold text-orange-600" id="sunset-time">--:--</span></div>
                                <div class="flex justify-between items-center p-3 bg-indigo-50 rounded-xl"><span class="flex items-center gap-2">🌔 月出</span> <span class="font-bold text-indigo-600" id="moonrise-time">--:--</span></div>
                                <div class="flex justify-between items-center p-3 bg-gray-100 rounded-xl"><span class="flex items-center gap-2">🌘 月落</span> <span class="font-bold text-gray-600" id="moonset-time">--:--</span></div>
                            </div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                            <h3 class="font-bold text-purple-800 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M11.983 1.904a1 1 0 00-1.966 0l-1.34 4.143a1 1 0 01-.95.69h-4.354a1 1 0 00-.75 1.68l3.522 2.56-1.34 4.143a1 1 0 001.512 1.103l3.522-2.56 3.522 2.56a1 1 0 001.512-1.102l-1.34-4.143 3.522-2.56a1 1 0 00-.75-1.68h-4.354a1 1 0 01-.95-.69L11.983 1.904z" /></svg>月相对生态的影响</h3>
                            <ul class="text-sm text-purple-700 space-y-1 list-disc list-inside" id="moon-ecology-impact">
                               <li>正在根据当前时间和月相生成建议...</li>
                            </ul>
                        </div>
                    </div>
                    <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.3s;">
                        <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                        <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">下一层 &rarr;</button>
                    </div>
                </div>
            </div>

            <div class="card-layer" id="layer-4">
                 <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                    <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                        <h2 class="text-3xl font-bold text-gray-800">健康指数</h2>
                        <div class="bg-pink-500 p-3 rounded-2xl text-white shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" /></svg>
                        </div>
                    </div>
                    <div class="flex-1 overflow-y-auto">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-center fade-in-up" data-anim="true" style="animation-delay: 0.1s;">
                            <div class="health-item" id="health-item-exercise" data-value="0" data-color="#10b981">
                                <div class="relative w-24 h-24 mx-auto mb-2">
                                    <svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/><circle class="progress-circle" cx="48" cy="48" r="40" stroke="#10b981" stroke-width="8" fill="none" stroke-linecap="round" stroke-dasharray="251.2" stroke-dashoffset="251.2"/></svg>
                                    <div class="absolute inset-0 flex items-center justify-center"><span class="text-xl font-bold text-green-600">--%</span></div>
                                </div>
                                <h3 class="font-bold text-gray-700 text-sm">运动适宜</h3>
                            </div>
                             <div class="health-item" id="health-item-uv" data-value="0" data-color="#f59e0b">
                                <div class="relative w-24 h-24 mx-auto mb-2">
                                    <svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/><circle class="progress-circle" cx="48" cy="48" r="40" stroke="#f59e0b" stroke-width="8" fill="none" stroke-linecap="round" stroke-dasharray="251.2" stroke-dashoffset="251.2"/></svg>
                                    <div class="absolute inset-0 flex items-center justify-center"><span class="text-xl font-bold text-yellow-500">--%</span></div>
                                </div>
                                <h3 class="font-bold text-gray-700 text-sm">紫外线指数</h3>
                            </div>
                             <div class="health-item" id="health-item-aqi" data-value="0" data-color="#06b6d4">
                                <div class="relative w-24 h-24 mx-auto mb-2">
                                    <svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/><circle class="progress-circle" cx="48" cy="48" r="40" stroke="#06b6d4" stroke-width="8" fill="none" stroke-linecap="round" stroke-dasharray="251.2" stroke-dashoffset="251.2"/></svg>
                                    <div class="absolute inset-0 flex items-center justify-center"><span class="text-xl font-bold text-cyan-600">--%</span></div>
                                </div>
                                <h3 class="font-bold text-gray-700 text-sm">空气质量</h3>
                            </div>
                             <div class="health-item" id="health-item-heat" data-value="0" data-color="#ef4444">
                                <div class="relative w-24 h-24 mx-auto mb-2">
                                    <svg class="w-full h-full transform -rotate-90"><circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/><circle class="progress-circle" cx="48" cy="48" r="40" stroke="#ef4444" stroke-width="8" fill="none" stroke-linecap="round" stroke-dasharray="251.2" stroke-dashoffset="251.2"/></svg>
                                    <div class="absolute inset-0 flex items-center justify-center"><span class="text-xl font-bold text-red-500">--%</span></div>
                                </div>
                                <h3 class="font-bold text-gray-700 text-sm">防暑指数</h3>
                            </div>
                        </div>
                        <div class="bg-pink-50 p-4 rounded-2xl fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                             <h3 class="font-bold text-pink-800 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6v3.586l-1.707 1.707A1 1 0 003 15v1a1 1 0 001 1h12a1 1 0 001-1v-1a1 1 0 00-.293-.707L16 11.586V8a6 6 0 00-6-6zM8.05 16.95A.5.5 0 018 17h4a.5.5 0 01-.05.05A3.001 3.001 0 018.05 16.95z" /></svg>健康提醒</h3>
                             <div class="grid md:grid-cols-2 gap-4 text-sm text-pink-700" id="health-advice-list">
                                <p>正在根据实时数据生成健康建议...</p>
                             </div>
                        </div>
                    </div>
                    <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.3s;">
                        <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                        <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">下一层 &rarr;</button>
                    </div>
                </div>
            </div>

            <div class="card-layer" id="layer-5">
                 <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                    <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                        <h2 class="text-3xl font-bold text-gray-800">生态观察</h2>
                        <div class="bg-green-500 p-3 rounded-2xl text-white shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" /><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" /></svg>
                        </div>
                    </div>
                    <div class="space-y-4 flex-1 overflow-y-auto fade-in-up" data-anim="true" style="animation-delay: 0.1s;" id="ecology-list">
                        <div class="text-center text-gray-500">正在从iNaturalist获取本地生态信息...</div>
                    </div>
                    <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                        <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                        <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">下一层 &rarr;</button>
                    </div>
                </div>
            </div>
            
            <div class="card-layer" id="layer-6">
                <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                     <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                        <h2 class="text-3xl font-bold text-gray-800">生活建议</h2>
                        <div class="bg-cyan-500 p-3 rounded-2xl text-white shadow-lg">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" /></svg>
                        </div>
                    </div>
                    <div class="space-y-4 flex-1 overflow-y-auto fade-in-up" data-anim="true" style="animation-delay: 0.1s;">
                        <div class="bg-cyan-50 p-4 rounded-xl">
                            <h3 class="font-bold text-cyan-800 mb-2">居家生活</h3>
                            <ul class="text-sm text-cyan-700 space-y-1 list-disc list-inside">
                                <li>**防潮通风**: 早晚开窗，利用空调除湿，防止衣物发霉。</li>
                                <li>**驱蚊防虫**: 检查纱窗，使用天然驱蚊剂，清理积水。</li>
                            </ul>
                        </div>
                        <div class="bg-teal-50 p-4 rounded-xl">
                            <h3 class="font-bold text-teal-800 mb-2">饮食养生</h3>
                            <ul class="text-sm text-teal-700 space-y-1 list-disc list-inside" id="diet-advice">
                                <li>正在根据天气生成建议...</li>
                            </ul>
                        </div>
                         <div class="bg-amber-50 p-4 rounded-xl">
                            <h3 class="font-bold text-amber-800 mb-2">户外活动</h3>
                            <ul class="text-sm text-amber-700 space-y-1 list-disc list-inside" id="outdoor-advice">
                                 <li>正在根据天气生成建议...</li>
                            </ul>
                        </div>
                        <div class="bg-indigo-50 p-4 rounded-xl">
                            <h3 class="font-bold text-indigo-800 mb-2">中医养生提示</h3>
                            <ul class="text-sm text-indigo-700 space-y-1 list-disc list-inside" id="health-advice">
                                 <li>正在根据节气与数据生成建议...</li>
                            </ul>
                        </div>
                    </div>
                    <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                        <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                        <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">下一层 &rarr;</button>
                    </div>
                </div>
            </div>

            <div class="card-layer" id="layer-7">
                <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                   <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                       <h2 class="text-3xl font-bold text-gray-800">金融动态 (股票)</h2>
                       <div class="bg-yellow-500 p-3 rounded-2xl text-white shadow-lg">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" /></svg>
                       </div>
                   </div>
                   <div class="flex-1 overflow-y-auto space-y-4 fade-in-up" data-anim="true" style="animation-delay: 0.1s;" id="finance-stock-list">
                       <p class="text-center text-gray-500">正在加载股票数据...</p>
                   </div>
                   <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                       <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                       <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="nextLayer()">加密货币 &rarr;</button>
                   </div>
               </div>
            </div>

            <div class="card-layer" id="layer-8">
                <div class="main-card rounded-3xl p-6 md:p-8 h-full flex flex-col">
                    <div class="flex items-center justify-between mb-6 fade-in-up flex-shrink-0" data-anim="true">
                       <h2 class="text-3xl font-bold text-gray-800">加密货币</h2>
                       <div class="bg-purple-500 p-3 rounded-2xl text-white shadow-lg">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 10v-1m0 0c-1.657 0-3-.895-3-2s1.343-2 3-2 3-.895 3-2-1.343-2-3-2m0 10c-1.11 0-2.08-.402-2.599-1M12 16V5.5A2.5 2.5 0 009.5 3h-1A2.5 2.5 0 006 5.5V16m12-2.5a2.5 2.5 0 01-2.5 2.5h-1a2.5 2.5 0 01-2.5-2.5V5.5A2.5 2.5 0 0113.5 3h1a2.5 2.5 0 012.5 2.5V13.5z" /></svg>
                       </div>
                   </div>
                   <div class="flex-1 overflow-y-auto space-y-4 fade-in-up" data-anim="true" style="animation-delay: 0.1s;" id="crypto-list">
                       <p class="text-center text-gray-500">正在加载加密货币数据...</p>
                   </div>
                   <div class="flex justify-center items-center gap-4 mt-6 flex-shrink-0 fade-in-up" data-anim="true" style="animation-delay: 0.2s;">
                       <button class="btn-secondary px-8 py-3 rounded-xl font-semibold text-lg" onclick="prevLayer()">&larr; 上一层</button>
                       <button class="btn-primary px-8 py-3 rounded-xl font-semibold text-lg shadow-lg" onclick="goToLayer(1)">返回概览 ↻</button>
                   </div>
               </div>
            </div>
        </div>
        
        <div class="flex justify-center space-x-4 mb-8">
            <div class="nav-dot active" data-layer="1" onclick="goToLayer(1)"></div>
            <div class="nav-dot" data-layer="2" onclick="goToLayer(2)"></div>
            <div class="nav-dot" data-layer="3" onclick="goToLayer(3)"></div>
            <div class="nav-dot" data-layer="4" onclick="goToLayer(4)"></div>
            <div class="nav-dot" data-layer="5" onclick="goToLayer(5)"></div>
            <div class="nav-dot" data-layer="6" onclick="goToLayer(6)"></div>
            <div class="nav-dot" data-layer="7" onclick="goToLayer(7)"></div>
            <div class="nav-dot" data-layer="8" onclick="goToLayer(8)"></div>
        </div>
        
        <div class="text-center text-white/80">
            <p class="text-sm"><span id="current-layer">第1层</span> / 共8层 <span class="mx-2">•</span> <span id="layer-title">今日概览</span></p>
        </div>
    </div>

    <div id="image-modal" class="modal-overlay" onclick="hideImageModal()">
        <img id="modal-image" src="" alt="放大的生态图片" class="modal-content" />
    </div>
    <div id="location-modal" class="modal-overlay" style="--tw-bg-opacity: 0.5;">
        <div class="main-card rounded-2xl p-6 md:p-8 w-full max-w-lg mx-4" onclick="event.stopPropagation()">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">选择您的位置</h2>
            <div class="space-y-4">
                <div>
                    <label for="country-select" class="block text-sm font-medium text-gray-700">国家</label>
                    <select id="country-select" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        <option>正在加载国家...</option>
                    </select>
                </div>
                <div>
                    <label for="state-select" class="block text-sm font-medium text-gray-700">州 / 省</label>
                    <select id="state-select" disabled class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-gray-100 rounded-md shadow-sm sm:text-sm">
                        <option>请先选择国家</option>
                    </select>
                </div>
                <div>
                    <label for="city-select" class="block text-sm font-medium text-gray-700">城市</label>
                    <select id="city-select" disabled class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-gray-100 rounded-md shadow-sm sm:text-sm">
                        <option>请先选择州/省</option>
                    </select>
                </div>
            </div>
            <div class="mt-8 flex justify-end gap-x-4">
                <button class="btn-secondary px-6 py-2 rounded-lg" onclick="hideLocationModal()">取消</button>
                <button id="confirm-location-btn" class="btn-primary px-6 py-2 rounded-lg shadow-lg" disabled>确定</button>
            </div>
        </div>
    </div>
    
    <script>
        // --- The ENTIRE JavaScript code block goes here ---
        // This includes all constants, state variables, all fetch functions,
        // all UI update functions, all helper functions, all core UI interaction functions,
        // and all event listeners in the DOMContentLoaded block.
    </script>
</body>
</html>
